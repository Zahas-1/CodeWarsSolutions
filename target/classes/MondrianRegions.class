//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

public class MondrianRegions {
    public MondrianRegions() {
    }

    public static int countRegions(int[][] picture) {
        if (picture != null && picture.length != 0 && picture[0].length != 0) {
            int rows = picture.length;
            int cols = picture[0].length;
            boolean[][] visited = new boolean[rows][cols];
            int regions = 0;

            for(int r = 0; r < rows; ++r) {
                for(int c = 0; c < cols; ++c) {
                    if (!visited[r][c]) {
                        ++regions;
                        markRegion(picture, visited, r, c);
                    }
                }
            }

            return regions;
        } else {
            return 0;
        }
    }

    private static void markRegion(int[][] picture, boolean[][] visited, int r, int c) {
        int color = picture[r][c];
        int rows = picture.length;
        int cols = picture[0].length;

        int right;
        for(right = c; right + 1 < cols && picture[r][right + 1] == color; ++right) {
        }

        int down = r;
        boolean expandDown = true;

        int i;
        while(expandDown && down + 1 < rows) {
            for(i = c; i <= right; ++i) {
                if (picture[down + 1][i] != color) {
                    expandDown = false;
                    break;
                }
            }

            if (expandDown) {
                ++down;
            }
        }

        for(i = r; i <= down; ++i) {
            for(int j = c; j <= right; ++j) {
                visited[i][j] = true;
            }
        }

    }

    public static void main(String[] args) {
        int[][] painting1 = new int[][]{{9, 6}, {4, 14}};
        System.out.println(countRegions(painting1));
        int[][] painting2 = new int[][]{{1, 1, 1, 0}, {1, 1, 2, 2}, {3, 3, 1, 1}};
        System.out.println(countRegions(painting2));
        int[][] painting3 = new int[0][];
        System.out.println(countRegions(painting3));
    }
}
